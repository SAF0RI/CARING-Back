#!/usr/bin/env python3
"""
ì§ˆë¬¸ ë°ì´í„° ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸
ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” question í…Œì´ë¸”ì— ê¸°ë³¸ ì§ˆë¬¸ë“¤ì„ ì €ì¥í•©ë‹ˆë‹¤.
"""

import json
from app.database import engine, SessionLocal
from app.models import Question


def init_questions():
    """ì§ˆë¬¸ ë°ì´í„° ì´ˆê¸°í™”"""
    # ì§ˆë¬¸ ë°ì´í„°
    questions_data = {
        "emotion": [
            "ì˜¤ëŠ˜ ê¸°ë¶„ì„ í•œ ë‹¨ì–´ë¡œ í‘œí˜„í•˜ë©´ ë¬´ì—‡ì¸ê°€ìš”?",
            "ì˜¤ëŠ˜ ê°ì •ì´ í¬ê²Œ ì˜¤ë¥´ë‚´ë¦° ì ì´ ìˆë‚˜ìš”?",
            "ì§€ê¸ˆ ê¸°ë¶„ì— ìƒ‰ì„ í•˜ë‚˜ ê³ ë¥¸ë‹¤ë©´ ë¬´ìŠ¨ ìƒ‰ì¸ê°€ìš”?",
            "ì˜¤ëŠ˜ ê¸°ë¶„ì´ ì¢‹ì•„ì§€ê²Œ í•œ ì†Œë¦¬ë‚˜ ìŒì•…ì´ ìˆì—ˆë‚˜ìš”?",
            "ì§€ê¸ˆ ê¸°ë¶„ì„ ìŒì‹ìœ¼ë¡œ ë¹„ìœ í•˜ë©´ ë¬´ì—‡ì¸ê°€ìš”?",
            "ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ì •ë¦¬í•˜ë©´ ë¬´ì—‡ì¸ê°€ìš”?",
            "ì˜¤ëŠ˜ ìì‹ ì„ ìë‘ìŠ¤ëŸ½ê²Œ ë§Œë“  ì¼ì´ ìˆë‚˜ìš”?",
            "ì§€ê¸ˆ ê°ì‚¬í•œ í•œ ê°€ì§€ë¥¼ ë§í•´ì¤„ë˜ìš”?",
            "ì˜¤ëŠ˜ ë¶ˆì•ˆí•˜ê±°ë‚˜ ê±±ì •ë˜ëŠ” ì¼ì´ ìˆì—ˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ì›ƒì—ˆë˜ ì´ìœ ê°€ ìˆë‹¤ë©´ ë¬´ì—‡ì¸ê°€ìš”?",
            "ì˜¤ëŠ˜ ì§œì¦ì´ ë‚¬ë˜ ì¼ì€ ë¬´ì—‡ì¸ê°€ìš”?",
            "ìµœê·¼ì— ëˆˆë¬¼ì´ ë‚  ë§Œí¼ ìŠ¬íë˜ ì ì´ ìˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ì™¸ë¡œì›€ì„ ëŠê¼ˆë‚˜ìš”?",
            "ì§€ê¸ˆ í•´ì†Œí•˜ê³  ì‹¶ì€ ê°ì •ì€ ë¬´ì—‡ì¸ê°€ìš”?"
        ],
        "stress": [
            "ì˜¤ëŠ˜ ìŠ¤íŠ¸ë ˆìŠ¤ ì§€ìˆ˜ëŠ” ì–´ëŠ ì •ë„ì˜€ë‚˜ìš”?",
            "ì˜¤ëŠ˜ í”¼ê³¤í•¨ì˜ ì›ì¸ì€ ë¬´ì—‡ ê°™ë‚˜ìš”?",
            "ì˜¤ëŠ˜ ê±±ì •ì´ë‚˜ ë¶ˆì•ˆìœ¼ë¡œ ì§‘ì¤‘ì´ ì–´ë ¤ì› ë‚˜ìš”?",
            "ìµœê·¼ì— ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í‘¼ ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€ìš”?",
            "ì˜¤ëŠ˜ ë¬´ì–¸ê°€ë¥¼ í¬ê¸°í–ˆë˜ ì ì´ ìˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ì§€ë‚˜ì¹˜ê²Œ ê±±ì •í•œ ì¼ì€ ë¬´ì—‡ì´ì—ˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ëˆ„êµ°ê°€ì™€ì˜ ê°ˆë“±ì´ ìˆì—ˆë‹¤ë©´ ì›ì¸ì€ ë¬´ì—‡ì¸ê°€ìš”?",
            "ì˜¤ëŠ˜ ê°ì •ì´ ë¶ˆì•ˆì •í•˜ë‹¤ê³  ëŠë‚€ ìˆœê°„ì´ ìˆì—ˆë‚˜ìš”?",
            "ì§€ê¸ˆ ë§ˆìŒì˜ ë¬´ê²Œë¥¼ 1~10ìœ¼ë¡œ í‘œí˜„í•œë‹¤ë©´?",
            "ì˜¤ëŠ˜ ìì‹ ì„ ì†ì´ê±°ë‚˜ ìˆ¨ê¸´ ê°ì •ì´ ìˆë‚˜ìš”?"
        ],
        "physical": [
            "ì˜¤ëŠ˜ ì•„ì¹¨ ê¸°ìƒ ê¸°ë¶„ì€ ì–´ë• ë‚˜ìš”?",
            "ì˜¤ëŠ˜ ìˆ˜ë©´ì€ ì¶©ë¶„í–ˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ëª¸ì´ í¸ì•ˆí–ˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ì‹ ì²´ì—ì„œ ë¶ˆí¸í•œ ë¶€ìœ„ê°€ ìˆì—ˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ì—ë„ˆì§€ ë ˆë²¨ì„ 0~10ìœ¼ë¡œ ë§í•´ì£¼ì‹¤ë˜ìš”?",
            "ìµœê·¼ ë©°ì¹ ê°„ ì‹ì‚¬ íŒ¨í„´ì€ ì–´ë• ë‚˜ìš”?",
            "í˜„ì¬ ë°°ê³ í””ì´ë‚˜ ì‹ìš• ìƒíƒœëŠ” ì–´ë–¤ê°€ìš”?",
            "ì˜¤ëŠ˜ ìì—°(ì‚°ì±…, í–‡ë³• ë“±)ê³¼ ì ‘í•œ ì  ìˆë‚˜ìš”?",
            "ì§€ê¸ˆ íœ´ì‹ì´ í•„ìš”í•˜ë‹¤ê³  ëŠë¼ë‚˜ìš”?",
            "ì˜¤ëŠ˜ ë¶ˆë©´ì¦ì´ë‚˜ ìˆ˜ë©´ ë°©í•´ê°€ ìˆì—ˆë‚˜ìš”?"
        ],
        "social": [
            "ì˜¤ëŠ˜ ëˆ„êµ¬ì™€ ëŒ€í™”í–ˆì„ ë•Œ í¸ì•ˆí–ˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ëˆ„êµ°ê°€ì—ê²Œ ê³ ë§ˆì›€ì„ ëŠë‚€ ì ì´ ìˆë‚˜ìš”?",
            "ì§€ê¸ˆ ëˆ„êµ¬ì—ê²Œì„œ ìœ„ì•ˆì„ ë°›ê³  ì‹¶ë‚˜ìš”?",
            "ì˜¤ëŠ˜ ëˆ„êµ°ê°€ì—ê²Œ ë„ì›€ë°›ì•˜ê±°ë‚˜ ë„ì™”ë‚˜ìš”?",
            "ì˜¤ëŠ˜ ìì‹ ì—ê²Œ ì¹œì ˆí–ˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ëˆ„êµ°ê°€ì˜ ë§ì— ìƒì²˜ë°›ì€ ì ì´ ìˆë‚˜ìš”?",
            "ì§€ê¸ˆ ëˆ„êµ°ê°€ì™€ ì´ì•¼ê¸°í•˜ê³  ì‹¶ë‹¤ë©´ ëˆ„êµ¬ì¸ê°€ìš”?",
            "ì˜¤ëŠ˜ ëŒ€í™” ì¤‘ ê°ì •ì„ ì†”ì§í•˜ê²Œ í‘œí˜„í–ˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ì£¼ë³€ ì‚¬ëŒê³¼ì˜ ê´€ê³„ëŠ” ì–´ë• ë‚˜ìš”?",
            "ìµœê·¼ ê°€ì¥ ê°ì‚¬í•œ ì‚¬ëŒì€ ëˆ„êµ¬ì¸ê°€ìš”?"
        ],
        "self_reflection": [
            "ì˜¤ëŠ˜ ìì‹ ì—ê²Œ í•œ ì¹­ì°¬ì€ ë¬´ì—‡ì¸ê°€ìš”?",
            "ì˜¤ëŠ˜ ì‘ì€ ì„±ê³µì€ ë¬´ì—‡ì´ì—ˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ë¬´ì–¸ê°€ë¥¼ ë°°ìš°ê±°ë‚˜ ê¹¨ë‹¬ì€ ê²Œ ìˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ëª©í‘œë¥¼ ì´ë£¨ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” í–‰ë™ì„ í–ˆë‚˜ìš”?",
            "ì§€ê¸ˆ ìì‹ ì—ê²Œ í•„ìš”í•œ ê²ƒì€ ë¬´ì—‡ì´ë¼ ìƒê°í•˜ë‚˜ìš”?",
            "ì§€ê¸ˆ ë¯¸ë˜ì— ëŒ€í•´ í¬ë§ì ì´ë¼ê³  ëŠë¼ë‚˜ìš”?",
            "ì˜¤ëŠ˜ ì¼ìƒ ë£¨í‹´ì—ì„œ ë²—ì–´ë‚œ ì¼ì´ ìˆì—ˆë‚˜ìš”?",
            "ì˜¤ëŠ˜ ìì‹ ì„ ëŒë³´ê¸° ìœ„í•´ í•œ ì‘ì€ í–‰ë™ì€ ë¬´ì—‡ì¸ê°€ìš”?",
            "ì˜¤ëŠ˜ ì €ë… ì´í›„ ì–´ë–¤ ê¸°ë¶„ìœ¼ë¡œ ì ë“¤ê³  ì‹¶ë‚˜ìš”?",
            "ì˜¤ëŠ˜ í•˜ë£¨ ì¤‘ ê°€ì¥ ê¸°ë»¤ë˜ ìˆœê°„ì€ ì–¸ì œì˜€ë‚˜ìš”?",
            "ì˜¤ëŠ˜ ì¼ì„ ë§ˆì¹œ ë’¤ ê¸°ë¶„ì€ ì–´ë• ë‚˜ìš”?",
            "ì˜¤ëŠ˜ ì§‘ì¤‘í•˜ê¸° ì‰¬ì› ë‚˜ìš”?",
            "ì˜¤ëŠ˜ ë¬´ì–¸ê°€ë¥¼ ê¸°ëŒ€í•˜ê³  ìˆë‚˜ìš”?",
            "ì§€ê¸ˆ í•˜ê³  ì‹¶ì€ í•œ ê°€ì§€ëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
            "ìµœê·¼ ì¼ì£¼ì¼ ì¤‘ ê°€ì¥ ê´œì°®ì•˜ë˜ ë‚ ì€ ì–¸ì œì˜€ë‚˜ìš”?"
        ]
    }
    
    db = SessionLocal()
    try:
        # ê¸°ì¡´ ì§ˆë¬¸ì´ ìˆëŠ”ì§€ í™•ì¸
        existing_count = db.query(Question).count()
        if existing_count > 0:
            print(f"âš ï¸  ì´ë¯¸ {existing_count}ê°œì˜ ì§ˆë¬¸ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ê±´ë„ˆëœë‹ˆë‹¤.")
            return
        
        # ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì§ˆë¬¸ ìƒì„±
        total_count = 0
        for category, questions in questions_data.items():
            for question_text in questions:
                question = Question(
                    question_category=category,
                    content=question_text
                )
                db.add(question)
                total_count += 1
        
        db.commit()
        print(f"âœ… {total_count}ê°œì˜ ì§ˆë¬¸ì´ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!")
        
        # ì¹´í…Œê³ ë¦¬ë³„ í†µê³„ ì¶œë ¥
        for category in questions_data.keys():
            count = db.query(Question).filter(Question.question_category == category).count()
            print(f"  - {category}: {count}ê°œ")
            
    except Exception as e:
        db.rollback()
        print(f"âŒ ì§ˆë¬¸ ì¶”ê°€ ì‹¤íŒ¨: {e}")
        raise
    finally:
        db.close()


if __name__ == "__main__":
    print("ğŸ“ ì§ˆë¬¸ ë°ì´í„° ì´ˆê¸°í™” ì‹œì‘...")
    init_questions()
